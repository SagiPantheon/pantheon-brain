<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Пантеон — серьёзный куб</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      overflow: hidden;
      background: #0a0a1f;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      color: #eee;
    }
    #label {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      font-weight: 600;
      letter-spacing: 1px;
      text-shadow: 0 0 12px #33ccff, 0 0 20px #88aaff;
      pointer-events: none;
    }
    #info {
      position: absolute;
      right: 20px;
      bottom: 20px;
      width: 260px;
      padding: 12px 16px;
      background: rgba(0, 15, 40, 0.85);
      border: 1px solid #33ccff;
      border-radius: 10px;
      backdrop-filter: blur(6px);
      font-size: 14px;
      line-height: 1.3;
    }
    #info h2 {
      margin: 0 0 6px;
      font-size: 18px;
      color: #00e0ff;
    }
    #info small {
      display: block;
      margin-top: 8px;
      color: #aaa;
    }
    canvas { display: block; }
    .hint {
      position: absolute;
      left: 20px;
      bottom: 20px;
      font-size: 12px;
      background: rgba(255,255,255,0.05);
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,0.1);
    }
  </style>
</head>
<body>
  <div id="label">Пантеон Куб</div>
  <div id="info" style="display:none;">
    <h2>Интерактивный куб</h2>
    <div>Это твоя платформа: светящийся, пульсирующий куб с глоу. Можно вращать, приближать и кликать по нему. Дальше будем вешать нейроны, учёных и карточки.</div>
    <small>Клик по кубу скрывает/показывает это окно.</small>
  </div>
  <div class="hint">мышка — вращение, колесо — зум, клик по кубу показывает инфо</div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/js/controls/OrbitControls.js"></script>
  <script>
    // базовое
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 6);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setPixelRatio(window.devicePixelRatio * 1);
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // управление
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.08;
    controls.minDistance = 3;
    controls.maxDistance = 12;

    // фон: звёзды
    const starsGeo = new THREE.BufferGeometry();
    const starCount = 800;
    const starVerts = [];
    for (let i = 0; i < starCount; i++) {
      const x = (Math.random() - 0.5) * 100;
      const y = (Math.random() - 0.5) * 100;
      const z = (Math.random() - 0.5) * 100;
      starVerts.push(x, y, z);
    }
    starsGeo.setAttribute("position", new THREE.Float32BufferAttribute(starVerts, 3));
    const starsMat = new THREE.PointsMaterial({ color: 0x8888ff, size: 0.5, transparent: true, opacity: 0.6 });
    const stars = new THREE.Points(starsGeo, starsMat);
    scene.add(stars);

    // свет
    const ambient = new THREE.AmbientLight(0x334466, 1.2);
    scene.add(ambient);
    const point = new THREE.PointLight(0xffffff, 1.6, 100);
    point.position.set(5, 5, 5);
    scene.add(point);
    const rimLight = new THREE.PointLight(0x33ccff, 1.2, 50);
    rimLight.position.set(-5, -3, 5);
    scene.add(rimLight);

    // основной куб
    const boxGeo = new THREE.BoxGeometry(1.8, 1.8, 1.8);
    const boxMat = new THREE.MeshStandardMaterial({
      color: new THREE.Color().setHSL(0.55, 0.6, 0.5),
      metalness: 0.4,
      roughness: 0.2,
      emissive: new THREE.Color(0x113355),
      emissiveIntensity: 0.25,
      flatShading: false
    });
    const cube = new THREE.Mesh(boxGeo, boxMat);
    scene.add(cube);

    // глоу-слой (внешний, чуть больше)
    const glowMat = new THREE.MeshBasicMaterial({
      color: 0x66ccff,
      transparent: true,
      opacity: 0.18,
      blending: THREE.AdditiveBlending
    });
    const glow = new THREE.Mesh(boxGeo.clone(), glowMat);
    glow.scale.multiplyScalar(1.15);
    scene.add(glow);

    // луч для клика
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    let infoVisible = true;
    const infoEl = document.getElementById("info");

    window.addEventListener("click", (e) => {
      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
      mouse.y = - (e.clientY / window.innerHeight) * 2 + 1;
      raycaster.setFromCamera(mouse, camera);
      const hits = raycaster.intersectObject(cube);
      if (hits.length) {
        infoVisible = !infoVisible;
        infoEl.style.display = infoVisible ? "block" : "none";
      }
    });

    // анимация
    let time = 0;
    function animate() {
      requestAnimationFrame(animate);
      time += 0.02;

      // пульсация масштаба
      const pulse = 1 + Math.sin(time * 1.2) * 0.04;
      cube.scale.setScalar(pulse);
      glow.scale.setScalar(pulse * 1.15);

      // цветовой сдвиг (hue)
      const h = (Math.sin(time * 0.3) * 0.5 + 0.5) * 0.6; // от 0 до ~0.6
      boxMat.color.setHSL(h, 0.6, 0.5);

      // вращение
      cube.rotation.y += 0.007;
      cube.rotation.x += 0.003;
      glow.rotation.copy(cube.rotation); // глоу повторяет

      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // ресайз
    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
